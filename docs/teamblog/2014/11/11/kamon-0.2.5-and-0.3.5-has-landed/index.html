<!DOCTYPE html>
<!--
  ~ =========================================================================================
  ~ Copyright © 2013 the kamon project <http://kamon.io/>
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file
  ~ except in compliance with the License. You may obtain a copy of the License at
  ~
  ~  http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software distributed under the
  ~ License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
  ~ either express or implied. See the License for the specific language governing permissions
  ~ and limitations under the License.
  ~ =========================================================================================
  -->

<html lang="en">
  <head>
    <title>Kamon 0.2.5/0.3.5 has Landed!</title>

<meta charset="utf-8">
<meta name="viewport"    content="width=device-width, initial-scale=1.0">
<meta name="description" content="Kamon is a set of tools that will help you monitor your reactive applications">

<!--<link rel="stylesheet" href="/assets/css/syntax-highlight.css">-->
<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,700' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="/assets/css/prism.css">
<link rel="stylesheet" href="/assets/css/styles.css">
<link rel="stylesheet" href="/assets/css/kamon.css">


<link rel="shortcut icon" href="/assets/img/favicon.ico" type="image/x-icon">
<link rel="icon" href="/assets/img/favicon.ico" type="image/x-icon">
<link href="https://plus.google.com/107736741680270898032?rel=author">
<link rel="alternate" type="application/rss+xml" title="Kamon Teamblog Feed" href="/teamblog/rss/">

<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

  </head>
  <body>
    <nav class="navbar navbar-default kamon-navbar">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-12 col-md-3">
          <a href="/documentation/get-started/">
            <img class="kamon-logo-image" alt="Kamon" src="/assets/img/kamon-logo-latest.svg">
          </a>
      </div>

      <div class="col-12 col-md-9">
        <div class="row justify-content-end align-items-center navigation-links">
            <div class="wip-warning col-12 col-md-4">
              WARNING: We are updating and fixing all docs around!
            </div>
            <a class="col-12 col-md-4 col-lg-3" href="/documentation/get-started/">
              <span class="nav-link">DOCUMENTATION</span>
            </a>
            <a class="col-12 col-md-2" href="/teamblog/">
              <span class="nav-link">BLOG</span>
            </a>
            
            <div class="col-12 col-md-2 hidden-sm-down">
              <div class="row justify-content-around align-items-center">
                <a href="https://twitter.com/kamonteam">
                  <i class="fa fa-twitter fa-lg nav-icon" aria-hidden="true"></i>
                </a>
                <a href="https://github.com/kamon-io/Kamon">
                  <i class="fa fa-github fa-lg nav-icon" aria-hidden="true"></i>
                </a>
                <a href="http://kamon.io/teamblog/rss/">
                  <i class="fa fa-rss fa-lg nav-icon" aria-hidden="true"></i>
                </a>
                <a href="https://groups.google.com/forum/#!forum/kamon-user">
                  <i class="fa fa-envelope fa-lg nav-icon" aria-hidden="true"></i>
                </a>
              </div>
            </div>
        </div>
      </div>
    </div>
  </div>
</nav>

    <div class="hero jumbotron-top">
      <div class="container">
        <div class="row">
          <div class="col-xs-12">
            <span class="jumbo-title">Kamon 0.2.5/0.3.5 has Landed!</span>
          </div>
        </div>
      </div>
    </div>

    <div class="main">
      <div class="container">
        <div class="row">
          <div class="col-sm-9 post-content">
            <div class="post-heading">
              <span class="heading-item"><i class="fa fa-calendar-o icon"></i>  11 Nov 2014</span>
              <!--<span class="heading-item"><i class="fa fa-user icon"></i>  by </span>-->
            </div>
            <hr>

            <p>We are very happy to announce that Kamon 0.2.5/0.3.5 has been released! This release comes with many improvements and
new features that couldn’t be there without the valuable help of <a href="https://github.com/kamon-io/Kamon/graphs/contributors">our contributors</a> as well as our super awesome users
reporting issues, suggesting improvements or giving feedback, to all of you, our most sincere thanks!</p>

<p>About three months have passed since our previous release and a lot has happened during this time, let’s start with our
usual compatibility notes:</p>

<ul>
  <li>0.3.5 is compatible with Akka 2.3, Spray 1.3, Play 2.3 and Scala 2.10.x/2.11.x</li>
  <li>0.2.5 is compatible with Akka 2.2, Spray 1.2, Play 2.2 and Scala 2.10.x</li>
</ul>

<p>And the juicy part, here is a description of the most notable changes introduced in this release, if you want more
detail about the issues fixed please check our <a href="http://kamon.io/project-info/changelog/">changelog</a>.</p>

<h2 id="experimental-support-for-akka-clusterremoting">Experimental Support for Akka Cluster/Remoting</h2>

<p>We <a href="http://kamon.io/teamblog/2014/08/31/experimental-support-for-akka-remoting-and-cluster-is-now-available/">blogged</a> some time ago when we introduced support for Akka Remoting and Cluster and since then, a few enhancements
were added to ensure that the experience was as smooth as possible, including the separation of all remoting/cluster
related code and instrumentation to a new <code>kamon-akka-remote</code> module that you add to your project only if you actually
need it. With regards to what it does, it’s basically a more stable version of the first experimental snapshot:</p>

<ul>
  <li>
    <p><strong>First, it doesn’t blow up in your face anymore</strong>, previous to this release users of remoting and cluster might
experiment errors because some parts of Kamon were not <code>Serializable</code>, making it imposible for them to use Kamon in such
projects. Now we did what was necessary to ensure that all messages flow without problems, keep reading for more on
that.</p>
  </li>
  <li>
    <p><strong>TraceContext propagation for regular messages</strong>: TraceContexts are propagated when sending a message to remote
actors in the same way it works with local actors. This also covers messages sent via ActorSelection and routers with
remote routees.</p>
  </li>
  <li>
    <p><strong>TraceContex propagation for system messages</strong>: If a actor with a remote supervisor fails, the TraceContext is also
propagated through system messages to remote actors, meaning that if one of your actors fails in node A and the
supervisor lives in node B, the TraceContext will still be there. This also covers the create actor scenario: if you
deploy a new remote Actor while a TraceContext is available (e.g. using a actor per request, deploying in a remote
node), the TraceContext available in the local node when deploying the remote actor will be available in the remote node
when creating the actor instance.</p>
  </li>
  <li>
    <p><strong>A Trace can start in one node and finish in another</strong>: As simple as it sounds, start a TraceContext in one node, let
it propagate thorugh messages to remote nodes and finish it over there! Sounds simple, but comes with a couple things
you need to know about:</p>
    <ul>
      <li>There is little protection from closing a TraceContext more than once. One of the biggest challenges of providing
this support comes from the fact that we use the TraceContext to measure how long did a request/feature execution
take to complete, which is an relatively easy task when eveything is local but challenging when working with
distributed systems. For now we decided not to provide full protection against finishing a remote TraceContext more
than once because the efforts of keeping a consistent view on the state of all TraceContexts across the cluster
seems prohibitive performance wise. We might reconsider this in the future based on feedback. If you understand
how the TraceContext works and how it is propagated you will be just fine, and if in doubt just drop us a line on
the mailing list.</li>
      <li>Even while all of our timing measurements are taken and reported in nanoseconds for local TraceContexts, when
finishing a remote TraceContext the we can’t rely on the relative <code>System.nanoTime</code> and have to resort back to
<code>System.currentTimeMillis</code>. Please make sure that you keep your clocks synchronized across the cluter.</li>
    </ul>
  </li>
</ul>

<h2 id="improvements-to-our-core">Improvements to our Core</h2>

<p>The most notable improvement, besides fixing a few issues reported by our users, is that now our Segments have a more
clearly defined API that works nicely and that became a solid base to other improvements related to segments that you
will see bellow. We also moved from using <code>Option[TraceContext]</code> to the null object idiom, this helps to make a cleaner
API for Trace Context manipulation and hopefully will make the life of our Java users less painful. If you are in the
Java land stay tuned, we will certainly show more love to you in the days to come!</p>

<h2 id="external-trace-and-segment-name-assignment-for-play-and-spray">External Trace and Segment Name Assignment for Play and Spray</h2>

<p>As you might already know, we start the TraceContext for you when using Play and Spray and when we do so, we need to
assign a name to the trace. The default name that we generate for a trace has the form <code>METHOD: /path</code> which isn’t the
thing in the world but at least gives you something to start with. This has one major drawback that is, if there are
things that change in your path for each request then you will have different trace names, and you probably don’t want
to see metrics for <code>GET: /users/1</code> and <code>GET: /users/2</code> but rather metrics for <code>GetUser</code>. The solution to this is simple
as we provide a <a href="https://github.com/kamon-io/Kamon/blob/master/kamon-play/src/main/scala/kamon/play/action/KamonTraceActions.scala#L23">play action</a> and a <a href="https://github.com/kamon-io/Kamon/blob/master/kamon-spray/src/main/scala/kamon/spray/KamonTraceDirectives.scala#L23">spray directive</a> that allow you to set the trace name to whatever you need it, but
additionaly to that, if you don’t wan’t to mess with your actions and routes and keep your code 100% Kamon-free, you can
now provide your own implementation of <code>kamon.play.PlayNameGenerator</code> and <code>kamon.spray.SprayNameGenerator</code> via the
<code>kamon.play.name-generator</code> and <code>kamon.spray.name-generator</code> setting keys.</p>

<h2 id="complete-rewrite-of-our-new-relic-module">Complete Rewrite of our New Relic Module</h2>

<p>Numbers don’t lie, and our Sonatype numbers say that about half of our users are using the <code>kamon-newrelic</code> module and
we wanted to make their lives better, that’s why we are now reporting the segments collected via HTTP clients such as
spray-client and play-WS, that will take you from only seeing the JVM time in the application overview to something like
this:</p>

<p><img class="img-fluid" src="/assets/img/newrelic-overview-with-web-external.png" /></p>

<p>Include the HTTP client calls as scoped metrics in the Transactions tab:</p>

<p><img class="img-fluid" src="/assets/img/newrelic-transaction-tab-with-scoped-external-services.png" /></p>

<p>And allow you to see a breakdown of external services in the External Services tab:</p>

<p><img class="img-fluid" src="/assets/img/newrelic-external-services-breakdown.png" /></p>

<p>Also, when errors are reported you will no longer see the thread name as the URI but rather the correct trace name
assigned to the request. We will continue to improve our New Relic support in the following releases and this rewrite
sets a more modular base to work on reporting more metrics and errors. One day, not too far from now, you should be able
to report data from Kamon to New Relic without using the New Relic agent at all.</p>

<h2 id="usability-improvements-for-our-stats-module">Usability Improvements for our StatS Module</h2>

<p>You can now configure the default metric key generator to enable/disable including the host name in the metrics path and
provide a fixed hostname if you like, but also, if you just have a totally different metric namespacing convention you
can now provide your own implementation of <code>kamon.statsd.MetricKeyGenerator</code> via the <code>kamon.statsd.metric-key-generator</code>
configuration setting. We also added router metrics and context switch metrics to StatsD.</p>

<h2 id="tracecontext-propagation-with-scalaz-futures">TraceContext Propagation with Scalaz Futures</h2>

<p>Well, simple but useful, the TraceContext available when creating a Scalaz Future is also available when running the
Future’s body as well as all callback related to it, pretty much in the same way as our instrumentation of Scala’s
Futures work.</p>

<p>The artifacts are already available in Sonatype, give this release a try and let us know if you have any issue!</p>



            <br><br>
            <div>
              <div id="disqus_thread"></div>
<script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'kamonio'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

            </div>

          </div>
          <div class="col-sm-3">
            <div class="blog-sidebar">
  <div class="row align-items-center justify-content-end kamino-docs-top sponsored-by-kamino">
    <div>
        <a href="https://kamino.io">
          <img class="img-fluid" alt="Sponsored by Kamino" src="/assets/img/sponsored-by-kamino.svg">
        </a>
    </div>
  </div> 

  <div class="row">
    <div class="col-12">
    <h4 class="sidebar-title">Latest Releases</h4>
      <div class="recent-post">
        
          <h4><a href="/teamblog/2016/10/10/kamon-0-6-3-is-out/" class="sidebar-post">Minor Update - Kamon 0.6.3 Released!</a></h4>
          <hr>
        
          <h4><a href="/teamblog/2016/07/25/kamon-0-6-2-is-out/" class="sidebar-post">Minor Update - Kamon 0.6.2 Released!</a></h4>
          <hr>
        
          <h4><a href="/teamblog/2016/04/27/kamon-0-6-1-is-out/" class="sidebar-post">Minor Update - Kamon 0.6.1 is out!</a></h4>
          <hr>
        
      </div>
    </div>
  </div>
  
  <div class="row">
    <div class="col-12">
      <h3 class="sidebar-title">Latest Posts</h3>
      <div class="recent-post">
        
          <h4><a href="/teamblog/2015/10/13/playing-with-streams-and-monitoring-docker/" class="sidebar-post">Playing with Streams and Monitoring Docker</a></h4>
          <hr>
        
          <h4><a href="/teamblog/2015/08/08/twenty-minutes-in-the-playground-monitoring-scalatra-with-kamon/" class="sidebar-post">20 minutes in the Playground: Monitoring Scalatra with Kamon</a></h4>
          <hr>
        
          <h4><a href="/teamblog/2015/06/14/welcome-akka-2.4-goodbye-akka-2.2/" class="sidebar-post">Welcome Akka 2.4, Goodbye Akka 2.2.</a></h4>
          <hr>
        
          <h4><a href="/teamblog/2015/03/13/quick-look-at-kamon-0.4.0/" class="sidebar-post">Quick look at Kamon 0.4.0</a></h4>
          <hr>
        
          <h4><a href="/teamblog/2014/11/02/understanding-spray-client-timeout-settings/" class="sidebar-post">Understanding Spray Client Timeout Settings</a></h4>
          <hr>
        
          <h4><a href="/teamblog/2014/08/31/experimental-support-for-akka-remoting-and-cluster-is-now-available/" class="sidebar-post">Experimental support for Akka Remoting and Cluster is now available!</a></h4>
          <hr>
        
          <h4><a href="/teamblog/2014/04/27/get-started-quicker-with-our-docker-image/" class="sidebar-post">Get started quicker with our docker image</a></h4>
          <hr>
        
      </div>
    </div>
  </div>
</div>

          </div>
        </div>
      </div>
    </div>

    <div class="hero jumbotron-bottom">
  <div class="container">
    <div class="row middle-xs">
      <div class="col-xs-12">
        
      </div>
    </div>
  </div>
</div>


<!--<footer class="footer">
  <div class="container">
    <div class="row">
      <div class="col-sm-8 col-sm-offset-2">
        <p class="text-center upper">
          Get in touch
        </p>
        <p class="text-center">
          <a href="https://twitter.com/kamonteam" class="social-icon"><i class="fa fa-twitter"></i></a>
          <a href="https://github.com/kamon-io/Kamon" class="social-icon"><i class="fa fa-2x fa-github"></i></a>
          <a href="/teamblog/rss/" class="social-icon"><i class="fa fa-rss"></i></a>
          <a href="https://groups.google.com/forum/#!forum/kamon-user" class="social-icon"><i class="fa fa-envelope"></i></a>
        </p>
        <p class="text-center">
          <a href="/introduction/project-info/support/" class="btn btn-support upper">Support <i class="fa fa-wrench"></i></a>
        </p>
        <p class="text-center">
          <img src="/assets/img/kamon-footer-logo.png" alt="logo" />
        </p>
        <p class="copyright">
          &copy; 2015 Kamon. All rights reserved.
        </p>
      </div>
    </div>
  </div>
</footer>-->



    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="/assets/js/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="/assets/js/bootstrap.min.js"></script>
    <script src="/assets/js/prism.js"></script>
    <script src="/assets/js/prism-typesafeconfig.js"></script>
    <script>

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-45369085-1', 'kamon.io');
    ga('send', 'pageview');

</script>

  </body>
</html>
