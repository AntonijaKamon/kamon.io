<html lang="en">
  <head>
    <title>Kamon | Configuration</title>

<meta charset="utf-8">
<meta name="viewport"    content="width=device-width, initial-scale=1.0">
<meta name="description" content="Kamon is a set of tools that will help you monitor your reactive applications">

<!--<link rel="stylesheet" href="/assets/css/syntax-highlight.css">-->
<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,700' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="/assets/css/prism.css">
<link rel="stylesheet" href="/assets/css/styles.css">
<link rel="stylesheet" href="/assets/css/kamon.css">


<link rel="shortcut icon" href="/assets/img/favicon.ico" type="image/x-icon">
<link rel="icon" href="/assets/img/favicon.ico" type="image/x-icon">
<link href="https://plus.google.com/107736741680270898032?rel=author">
<link rel="alternate" type="application/rss+xml" title="Kamon Teamblog Feed" href="/teamblog/rss/">

<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

  </head>
  <body>
    <nav class="navbar navbar-default kamon-navbar">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-12 col-md-3">
          <a href="/documentation/get-started/">
            <img class="kamon-logo-image" alt="Kamon" src="/assets/img/kamon-logo-latest.svg">
          </a>
      </div>

      <div class="col-12 col-md-9">
        <div class="row justify-content-end align-items-center navigation-links">
            <div class="wip-warning col-12 col-md-4">
              WARNING: We are updating and fixing all docs around!
            </div>
            <a class="col-12 col-md-4 col-lg-3" href="/documentation/get-started/">
              <span class="nav-link">DOCUMENTATION</span>
            </a>
            <a class="col-12 col-md-2" href="/teamblog/">
              <span class="nav-link">BLOG</span>
            </a>
            
            <div class="col-12 col-md-2 hidden-sm-down">
              <div class="row justify-content-around align-items-center">
                <a href="https://twitter.com/kamonteam">
                  <i class="fa fa-twitter fa-lg nav-icon" aria-hidden="true"></i>
                </a>
                <a href="https://github.com/kamon-io/Kamon">
                  <i class="fa fa-github fa-lg nav-icon" aria-hidden="true"></i>
                </a>
                <a href="http://kamon.io/teamblog/rss/">
                  <i class="fa fa-rss fa-lg nav-icon" aria-hidden="true"></i>
                </a>
                <a href="https://groups.google.com/forum/#!forum/kamon-user">
                  <i class="fa fa-envelope fa-lg nav-icon" aria-hidden="true"></i>
                </a>
              </div>
            </div>
        </div>
      </div>
    </div>
  </div>
</nav>
      <div class="hero jumbotron-top">
    <div class="container">
      <div class="row">
        <div class="col-xs-12 col-md-7">
          <span class="jumbo-title">Documentation</span>
        </div>
      </div>
    </div>
  </div>  

    <div class="container">
      <div class="row">
        <div class="col-12 col-md-9 push-md-3">
          <div class="row align-items-center justify-content-end kamino-docs-top">
            <div>
                <a href="https://kamino.io">
                  <img class="img-fluid" alt="Sponsored by Kamino" src="/assets/img/sponsored-by-kamino.svg">
                </a>
            </div>
          </div>
          <div class="row docs-content">
            <div class="col-12">
              <h1 id="configuring-kamon">Configuring Kamon</h1>

<p>Kamon uses the <a href="https://github.com/typesafehub/config">Typesafe Config</a> library to manage all that can be configured inside Kamon, as many projects in the JVM
world are doing already. This library brings clear and predictable practices for defining application and library
settings that can be easily understood and extended. If you are already familiar with this library, you can just jump
into the next section.</p>

<p>The Typesafe Config’s standard behavior is very straightforward and we will resume it for you: When you create a
configuration object using <code>ConfigFactory.load()</code>, it will read the available configurations from a few predefined
places and have them ready for you, so that whenever you want to read a configuration setting they will be looked up
in the following order:</p>

<ul>
  <li>JVM System Properties.</li>
  <li>All <code>application.conf</code> files in your classpath.</li>
  <li>All <code>application.json</code> files in your classpath.</li>
  <li>All <code>application.properties</code> files in your classpath.</li>
  <li>All <code>reference.conf</code> files in your classpath.</li>
</ul>

<p>Normally, each library that uses the Typesafe Config library for configuration purposes will ship with a
<code>reference.conf</code> file containing sensible default values for all the settings that can be configured and the user will
provide “overrides” to those values primarily via your own <code>application.conf</code> file or via system properties. Probably an
image of the common lookup priorities will settle quickly in your mind:</p>

<p><img class="img-fluid" src="/assets/img/diagrams/typesafe-config-overview.png" /></p>

<p>These configuration files are usually written using the <a href="https://github.com/typesafehub/config/blob/master/HOCON.md">HOCON</a> notation. All Kamon modules that need configuration ship
with a reference.conf file where default settings are contained and you are free to override any of those values by
supplying your owns in your <code>application.conf</code> file. Whenever we refer to a configuration setting throughout the docs,
we are certainly referring to a setting available in a module’s <code>reference.conf</code> file that you can override at your
wish.</p>

<p>This resume is just a very high level overview of what the Typesafe Config library can do for you, please refer to their
<a href="https://github.com/typesafehub/config">documentation</a> to learn how to slice and dice with configuration settings and make the best possible profit out of it.</p>

<h2 id="providing-a-custom-config-object">Providing a Custom Config Object</h2>

<p>If you need to prevent Kamon from using the standard behavior of calling <code>ConfigFactory.load()</code>, there is an additional
overload of the <code>Kamon.start(..)</code> method that accepts a configuration object to be used instead. This is how you would
provide such a custom configuration object:</p>

<div class="code-example"><ul class="nav nav-tabs language-tab justify-content-end" role="tablist"><li class="nav-item"><a class="nav-link active" data-toggle="tab" href="#scala_0_570907" role="tab">Scala</a></li><li class="nav-item"><a class="nav-link" data-toggle="tab" href="#java_1_570907" role="tab">Java</a></li></ul><div class="tab-content"><div class="tab-pane active" id="scala_0_570907" role="tabpanel"><pre class="line-numbers language-scala"><code class="language-scala">object CustomConfiguration {
  val customConfig = ConfigFactory.load(&quot;custom-config&quot;)
  val codeConfig = ConfigFactory.parseString(
    &quot;kamon.metric.track-unmatched-entities = no&quot;)

  Kamon.start(codeConfig.withFallback(customConfig))
  // Kamon gets initialized with the provided configuration rather
  // than calling ConfigFactory.load() itself.


  // This application wont terminate unless you shutdown Kamon.
  Kamon.shutdown()
}
</code></pre></div><div class="tab-pane" id="java_1_570907" role="tabpanel"><pre class="line-numbers language-java"><code class="language-java">public class CustomConfiguration {
  public static void main(String[] args) {
    final Config customConfig = ConfigFactory.load(&quot;custom-config&quot;);
    final Config codeConfig = ConfigFactory.parseString(
      &quot;kamon.metric.track-unmatched-entities = no&quot;);

    Kamon.start(codeConfig.withFallback(customConfig));
    // Kamon gets initialized with the provided configuration rather
    // than calling ConfigFactory.load() itself.


    // This application wont terminate unless you shutdown Kamon.
    Kamon.shutdown();
  }
}
</code></pre></div></div></div>

<p>Please note that when you provide your own <code>Config</code> object, Kamon will use that and only that object as a configuration
settings source. You must ensure that the <code>Config</code> object you are supplying contains both your custom settings and all
the reference settings available in the classpath. Most APIs in the typesafe-config’s <code>ConfigFactory</code> class already take
care of that but if that isn’t the case for you then simply adding a <code>.withFallback(ConfigFactory.defaultReference())</code>
to your configuration object you can ensure that everything Kamon needs is in place.</p>

<h2 id="special-considerations-for-akka-and-spray">Special Considerations for Akka and Spray</h2>

<p>Kamon core components use Akka internally for several purposes and some modules make use of Spray as well, but all of
this happens in a internal actor system created by Kamon for it’s own usage. If your application is using Akka or Spray,
you probably don’t want all the settings applied to your application’s actor system to be applied to Kamon’s actor
system as well, that’s why we have a special treatment of configuration settings for the <code>akka.*</code> and <code>spray.*</code>
patterns.</p>

<p>When Kamon’s internal actor system is created we strip away all the <code>akka.*</code> and <code>spray.*</code> configuration settings
available (either from standard behavior or from a provided Config object) and we add all the configuration settings
available under the <code>kamon.internal-config</code> to the resulting Config object before supplying it to the internal actor
system. By doing this, any customizations you do to Akka or Spray for your application wont affect Kamon’s behavior, but
still you can provide custom settings for Kamon’s internal actor system if you want to.</p>

<p>For example, if you wish to change the log level and the parallelism factor for the default dispatcher in Kamon’s internal
actor system, you would need to provide something like this in your configuration file:</p>

<div class="code-example"><ul class="nav nav-tabs language-tab justify-content-end" role="tablist"><li class="nav-item"><a class="nav-link active" data-toggle="tab" href="#typesafeconfig_0_633228" role="tab">application.conf</a></li></ul><div class="tab-content"><div class="tab-pane active" id="typesafeconfig_0_633228" role="tabpanel"><pre class="line-numbers language-typesafeconfig"><code class="language-typesafeconfig">kamon.internal-config {
  akka {
    loglevel = DEBUG

    actor.default-dispatcher {
      fork-join-executor.parallelism-factor = 1.0
    }
  }
}
</code></pre></div></div></div>


            </div>
          </div>
          <!--<div class="row align-items-center kamino-docs-bottom">
            <div class="col-xs-offset-1 col-xs-5">
                <a href="http://kamino.io">
                  <img class="img-fluid" alt="Sponsored by Kamino" src="/assets/img/sponsored-by-kamino.svg">
                </a>
                <a class="btn btn-sign-up btn-lg">Visit kamino.io</a>
            </div>
          </div>-->
        </div>

        <div class="col-12 col-md-3 pull-md-9 documentation-sidebar">
          <section>
  <ul class="tree">
    <li><a class="docs-level-three side" href="/documentation/get-started/"></i>Get Started</a></li>
    <li><a class="docs-level-three side" href="/documentation/events-and-workshops/"></i>Upcoming Events</a></li>
  </ul>
</section>
          


<section>
  <div class="tree tree-toggler docs-level-one row justify-content-between align-items-center">
    <span>
      kamon-core
    </span>

    <div class="dropdown version-dropdown">
      <a class="btn btn-secondary dropdown-toggle" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        0.6.6
      </a>

      <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
        
          <a class="dropdown-item" href="/documentation/kamon-core/0.6.6/overview/">0.6.6</a>
        
      </div>
    </div>
  </div>

  <ul>
    
      <li><a class="docs-level-three" href="/documentation/kamon-core/0.6.6/overview/">Get Started</a></li>
    
      <li><a class="docs-level-three" href="/documentation/kamon-core/0.6.6/configuration/">Configuring Kamon</a></li>
    

    
      <li>
      <label class="tree-toggler tree docs-level-two">Tracing</label>
      <ul class="tree tree-toggler">
        
        
          <li><a class="docs-level-three" href="/documentation/kamon-core/0.6.6/tracing/core-concepts/">Core Concepts</a></li>
        
          <li><a class="docs-level-three" href="/documentation/kamon-core/0.6.6/tracing/subscription-protocol/">Subscription Protocol</a></li>
        
          <li><a class="docs-level-three" href="/documentation/kamon-core/0.6.6/tracing/threading-model-considerations/">Threading Model Considerations</a></li>
        
          <li><a class="docs-level-three" href="/documentation/kamon-core/0.6.6/tracing/trace-context-manipulation/">Trace Context Manipulation</a></li>
        
          <li><a class="docs-level-three" href="/documentation/kamon-core/0.6.6/tracing/trace-metrics/">Trace Metrics</a></li>
        
      </ul>
      </li>
    
      <li>
      <label class="tree-toggler tree docs-level-two">Metrics</label>
      <ul class="tree tree-toggler">
        
        
          <li><a class="docs-level-three" href="/documentation/kamon-core/0.6.6/metrics/core-concepts/">Core Concepts</a></li>
        
          <li><a class="docs-level-three" href="/documentation/kamon-core/0.6.6/metrics/instruments/">Instruments</a></li>
        
          <li><a class="docs-level-three" href="/documentation/kamon-core/0.6.6/metrics/recording-metrics/">Recording Metrics</a></li>
        
          <li><a class="docs-level-three" href="/documentation/kamon-core/0.6.6/metrics/subscription-protocol/">Subscription Protocol</a></li>
        
      </ul>
      </li>
    
      <li>
      <label class="tree-toggler tree docs-level-two">Modules</label>
      <ul class="tree tree-toggler">
        
        
          <li><a class="docs-level-three" href="/documentation/kamon-core/0.6.6/modules/using-modules/">Using Modules</a></li>
        
      </ul>
      </li>
    
</section>
          <section>
  <div class="tree tree-toggler docs-level-one row align-items-center">
    <span>All Modules</span>
  </div>
  <ul class="tree tree-toggler">
    <li>
      <label class="tree-toggler tree docs-level-two">Foundations</label>
      <ul>
        <li><a class="docs-level-three" href="/documentation/kamon-core/0.6.6/overview/">Metrics and Tracing</a></li>
      </ul>
    </li>

    <li>
      <label class="tree-toggler tree docs-level-two">Metrics Collection</label>
      <ul>
        <li><a class="docs-level-three" href="/documentation/kamon-akka/0.6.6/overview/">Akka</a></li>
        <li><a class="docs-level-three" href="/documentation/kamon-scala/0.6.6/overview/">Scala Futures</a></li>
        <li><a class="docs-level-three" href="/documentation/kamon-play/0.6.6/overview/">Play Framework</a></li>
        <li><a class="docs-level-three" href="/documentation/kamon-spray/0.6.6/overview/">Spray</a></li>
        <li><a class="docs-level-three" href="/documentation/kamon-jdbc/0.6.6/overview/">JDBC</a></li>
        <li><a class="docs-level-three" href="/documentation/kamon-annotation/0.6.6/overview/">Annotations</a></li>
        <li><a class="docs-level-three" href="/documentation/kamon-system-metrics/0.6.6/overview/">System Metrics</a></li>
      </ul>
    </li>

    <li>
      <label class="tree-toggler tree docs-level-two">Reporter Backends</label>
      <ul>
        <!--<li><a class="docs-level-three" href="/documentation/kamon-kamino/0.6.6/overview/">Kamino</a></li>-->
        <li><a class="docs-level-three" href="/documentation/kamon-statsd/0.6.6/overview/">StatsD</a></li>
        <li><a class="docs-level-three" href="/documentation/kamon-datadog/0.6.6/overview/">Datadog</a></li>
        <li><a class="docs-level-three" href="/documentation/kamon-newrelic/0.6.6/overview/">New Relic</a></li>
        <li><a class="docs-level-three" href="/documentation/kamon-sematext-spm/0.6.6/overview/">Sematext SPM</a></li>
        <li><a class="docs-level-three" href="/documentation/kamon-jmx/0.6.6/overview/">JMX</a></li>
        <li><a class="docs-level-three" href="/documentation/kamon-fluentd/0.6.6/overview/">FluentD</a></li>
        <li><a class="docs-level-three" href="/documentation/kamon-influxdb/0.6.6/overview/">InfluxDB</a></li>
        <!--<li><a class="docs-level-three" href="/documentation/kamon-graphite/1.0.4/overview/">Graphite</a></li>-->
        <li><a class="docs-level-three" href="/documentation/kamon-riemann/0.6.6/overview/">Riemann</a></li>
        <li><a class="docs-level-three" href="/documentation/kamon-khronus/0.6.6/overview/">Khronus</a></li>

      </ul>
    </li>    
  </ul>
</section>
        </div>

      </div>
    </div>

    <div class="hero jumbotron-bottom">
  <div class="container">
    <div class="row middle-xs">
      <div class="col-xs-12">
        
      </div>
    </div>
  </div>
</div>


<!--<footer class="footer">
  <div class="container">
    <div class="row">
      <div class="col-sm-8 col-sm-offset-2">
        <p class="text-center upper">
          Get in touch
        </p>
        <p class="text-center">
          <a href="https://twitter.com/kamonteam" class="social-icon"><i class="fa fa-twitter"></i></a>
          <a href="https://github.com/kamon-io/Kamon" class="social-icon"><i class="fa fa-2x fa-github"></i></a>
          <a href="/teamblog/rss/" class="social-icon"><i class="fa fa-rss"></i></a>
          <a href="https://groups.google.com/forum/#!forum/kamon-user" class="social-icon"><i class="fa fa-envelope"></i></a>
        </p>
        <p class="text-center">
          <a href="/introduction/project-info/support/" class="btn btn-support upper">Support <i class="fa fa-wrench"></i></a>
        </p>
        <p class="text-center">
          <img src="/assets/img/kamon-footer-logo.png" alt="logo" />
        </p>
        <p class="copyright">
          &copy; 2015 Kamon. All rights reserved.
        </p>
      </div>
    </div>
  </div>
</footer>-->



    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="/assets/js/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="/assets/js/tether.min.js"></script>
    <script src="/assets/js/bootstrap.min.js"></script>
    <script src="/assets/js/prism.js"></script>
    <script src="/assets/js/prism-typesafeconfig.js"></script>
    <script>

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-45369085-1', 'kamon.io');
    ga('send', 'pageview');

</script>

  </body>
</html>
