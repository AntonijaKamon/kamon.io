<html lang="en">
  <head>
    <title>Kamon | Core | Documentation</title>

<meta charset="utf-8">
<meta name="viewport"    content="width=device-width, initial-scale=1.0">
<meta name="description" content="Kamon is a set of tools that will help you monitor your reactive applications">

<!--<link rel="stylesheet" href="/assets/css/syntax-highlight.css">-->
<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,700' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="/assets/css/prism.css">
<link rel="stylesheet" href="/assets/css/styles.css">
<link rel="stylesheet" href="/assets/css/kamon.css">


<link rel="shortcut icon" href="/assets/img/favicon.ico" type="image/x-icon">
<link rel="icon" href="/assets/img/favicon.ico" type="image/x-icon">
<link href="https://plus.google.com/107736741680270898032?rel=author">
<link rel="alternate" type="application/rss+xml" title="Kamon Teamblog Feed" href="/teamblog/rss/">

<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

  </head>
  <body>
    <nav class="navbar navbar-default kamon-navbar">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-12 col-md-3">
          <a href="/documentation/get-started/">
            <img class="kamon-logo-image" alt="Kamon" src="/assets/img/kamon-logo-latest.svg">
          </a>
      </div>

      <div class="col-12 col-md-9">
        <div class="row justify-content-end align-items-center navigation-links">
            <div class="wip-warning col-12 col-md-4">
              WARNING: We are updating and fixing all docs around!
            </div>
            <a class="col-12 col-md-4 col-lg-3" href="/documentation/get-started/">
              <span class="nav-link">DOCUMENTATION</span>
            </a>
            <a class="col-12 col-md-2" href="/teamblog/">
              <span class="nav-link">BLOG</span>
            </a>
            
            <div class="col-12 col-md-2 hidden-sm-down">
              <div class="row justify-content-around align-items-center">
                <a href="https://twitter.com/kamonteam">
                  <i class="fa fa-twitter fa-lg nav-icon" aria-hidden="true"></i>
                </a>
                <a href="https://github.com/kamon-io/Kamon">
                  <i class="fa fa-github fa-lg nav-icon" aria-hidden="true"></i>
                </a>
                <a href="http://kamon.io/teamblog/rss/">
                  <i class="fa fa-rss fa-lg nav-icon" aria-hidden="true"></i>
                </a>
                <a href="https://groups.google.com/forum/#!forum/kamon-user">
                  <i class="fa fa-envelope fa-lg nav-icon" aria-hidden="true"></i>
                </a>
              </div>
            </div>
        </div>
      </div>
    </div>
  </div>
</nav>
      <div class="hero jumbotron-top">
    <div class="container">
      <div class="row">
        <div class="col-xs-12 col-md-7">
          <span class="jumbo-title">Documentation</span>
        </div>
      </div>
    </div>
  </div>  

    <div class="container">
      <div class="row">
        <div class="col-12 col-md-9 push-md-3">
          <div class="row align-items-center justify-content-end kamino-docs-top">
            <div>
                <a href="https://kamino.io">
                  <img class="img-fluid" alt="Sponsored by Kamino" src="/assets/img/sponsored-by-kamino.svg">
                </a>
            </div>
          </div>
          <div class="row docs-content">
            <div class="col-12">
              <h1 id="recording-metrics">Recording Metrics</h1>

<p>Recording metrics is dead simple, all you need to do is ask the metrics module for the entity recorder you are
interested in and start using it to measure your applicationâ€™s behavior. If you request the same entity several times
then you will get back the exact same recorder instance on every call, only the first call will trigger the
instantiation of the necessary entity recorder.</p>

<h2 id="using-simple-recorders">Using Simple Recorders</h2>

<p>As mentioned in the <a href="/core/metrics/core-concepts/">core concepts</a> section, Kamon provides a few built-in entity recorders for single metric entities
that can be used by simply requesting a histogram, counter, gauge or min max counter to the metrics module as show in
this example:</p>

<div class="code-example"><ul class="nav nav-tabs language-tab justify-content-end" role="tablist"><li class="nav-item"><a class="nav-link active" data-toggle="tab" href="#scala_0_774773" role="tab">Scala</a></li><li class="nav-item"><a class="nav-link" data-toggle="tab" href="#java_1_774773" role="tab">Java</a></li></ul><div class="tab-content"><div class="tab-pane active" id="scala_0_774773" role="tabpanel"><pre class="line-numbers language-scala"><code class="language-scala">  val myHistogram = Kamon.metrics.histogram(&quot;my-histogram&quot;)
  myHistogram.record(42)
  myHistogram.record(43)
  myHistogram.record(44)

  val myCounter = Kamon.metrics.counter(&quot;my-counter&quot;)
  myCounter.increment()
  myCounter.increment(17)

  val myMMCounter = Kamon.metrics.minMaxCounter(&quot;my-mm-counter&quot;, refreshInterval = 500 milliseconds)
  myMMCounter.increment()
  myMMCounter.decrement()

  val myTaggedHistogram = Kamon.metrics.histogram(&quot;my-tagged-histogram&quot;, tags = Map(&quot;algorithm&quot; -&gt; &quot;X&quot;))
  myTaggedHistogram.record(700L)
  myTaggedHistogram.record(800L)
</code></pre></div><div class="tab-pane" id="java_1_774773" role="tabpanel"><pre class="line-numbers language-java"><code class="language-java">    final Histogram myHistogram = Kamon.metrics().histogram(&quot;my-histogram&quot;);
    myHistogram.record(42);
    myHistogram.record(43);
    myHistogram.record(44);

    final Counter myCounter = Kamon.metrics().counter(&quot;my-counter&quot;);
    myCounter.increment();
    myCounter.increment(17);

    final MinMaxCounter myMMCounter = Kamon.metrics().minMaxCounter(&quot;my-mm-counter&quot;, new FiniteDuration(500, TimeUnit.MILLISECONDS));
    myMMCounter.increment();
    myMMCounter.decrement();

    final Histogram myTaggedHistogram = Kamon.metrics().histogram(&quot;my-tagged-histogram&quot;, tagsFromMap(ImmutableMap.of(&quot;algorithm&quot;, &quot;X&quot;)));
    myTaggedHistogram.record(700L);
    myTaggedHistogram.record(800L);

    // kamon.util.JavaTags.tagsFromMap can be statically imported
    // to easily transform a java.util.Map&lt;String, String&gt; into a
    // scala.collection.immutable.Map[String, String] as expected
    // by the metrics module API.


</code></pre></div></div></div>

<p>When using these simple entity recorders you will not get back an instance of the internal <code>EntityRecorder</code>
implementation but rather the plain instrument that you requested. Kamon still has that single instrument wrapped in a
<code>EntityRecorder</code> internally, but that is just an implementation detail.</p>

<p>The <code>.histogram(..)</code>, <code>.counter(..)</code>, <code>.gauge(..)</code> and <code>.minMaxCounter(..)</code> methods come with several overloads that
allow you to provide custom settings and tags for the requested instruments, please feel free to navigate through them
and get familiar with the available options.</p>

<h2 id="using-entity-recorders">Using Entity Recorders</h2>

<p>The API for using entity recorders is similar to that of simple recorders: you ask for an entity and you get back an
entity recorder, the only additional requirement is to provide a implementation of
<code>kamon.metric.EntityRecorderFactory&lt;T&gt;</code> where <code>T</code> is the type of the entity recorder you want. The reason for this
requirement is that Kamon will only instantiate your recorder once and only if it has not been already instantiated,
this can only be achieved if you tell Kamon how to create the desired entity recorder.</p>

<div class="code-example"><ul class="nav nav-tabs language-tab justify-content-end" role="tablist"><li class="nav-item"><a class="nav-link active" data-toggle="tab" href="#scala_0_739411" role="tab">Scala</a></li><li class="nav-item"><a class="nav-link" data-toggle="tab" href="#java_1_739411" role="tab">Java</a></li></ul><div class="tab-content"><div class="tab-pane active" id="scala_0_739411" role="tabpanel"><pre class="line-numbers language-scala"><code class="language-scala">  val myManagedActorMetrics = Kamon.metrics.entity(ActorMetrics, &quot;my-managed-actor&quot;)

  myManagedActorMetrics.mailboxSize.increment()
  myManagedActorMetrics.processingTime.record(42)
  myManagedActorMetrics.mailboxSize.decrement()
</code></pre></div><div class="tab-pane" id="java_1_739411" role="tabpanel"><pre class="line-numbers language-java"><code class="language-java">    final ActorMetrics myManagedActorMetrics = Kamon.metrics().entity(ActorMetrics.Factory, &quot;my-managed-actor&quot;);

    myManagedActorMetrics.mailboxSize().increment();
    myManagedActorMetrics.processingTime().record(42);
    myManagedActorMetrics.mailboxSize().decrement();
</code></pre></div></div></div>

<h2 id="removing-recorders">Removing Recorders</h2>

<p>Typically the entities that you want to monitor will be around during the entire lifetime of your application and you
rarely will want to manually remove a recorder from Kamon but, in case you need to do so the metrics module provides
several remove methods for both simple recorders and entities. Remember that all entities are identified by three main
attributes: a name, a category and tags; remember to provide the same tags that you used when registered the desired
entity to ensure that the correct one is found and removed. Here is a quick example of removing the recorders created in
the previous examples of this page:</p>

<div class="code-example"><ul class="nav nav-tabs language-tab justify-content-end" role="tablist"><li class="nav-item"><a class="nav-link active" data-toggle="tab" href="#scala_0_621836" role="tab">Scala</a></li><li class="nav-item"><a class="nav-link" data-toggle="tab" href="#java_1_621836" role="tab">Java</a></li></ul><div class="tab-content"><div class="tab-pane active" id="scala_0_621836" role="tabpanel"><pre class="line-numbers language-scala"><code class="language-scala">  Kamon.metrics.removeHistogram(&quot;my-histogram&quot;)
  Kamon.metrics.removeCounter(&quot;my-counter&quot;)
  Kamon.metrics.removeMinMaxCounter(&quot;my-mm-counter&quot;)

  // The histogram was created with tags and the same tags need to be
  // provided to correctly remove it.
  Kamon.metrics.removeHistogram(&quot;my-tagged-histogram&quot;, tags = Map(&quot;algorithm&quot; -&gt; &quot;X&quot;))

  // For entities you need to provide the entity category as well.
  Kamon.metrics.removeEntity(&quot;my-managed-actor&quot;, &quot;akka-actor&quot;)
</code></pre></div><div class="tab-pane" id="java_1_621836" role="tabpanel"><pre class="line-numbers language-java"><code class="language-java">    Kamon.metrics().removeHistogram(&quot;my-histogram&quot;);
    Kamon.metrics().removeCounter(&quot;my-counter&quot;);
    Kamon.metrics().removeMinMaxCounter(&quot;my-mm-counter&quot;);

    // The histogram was created with tags and the same tags need to be
    // provided to correctly remove it.
    Kamon.metrics().removeHistogram(&quot;my-tagged-histogram&quot;, tagsFromMap(ImmutableMap.of(&quot;algorithm&quot;, &quot;X&quot;)));

    // For entities you need to provide the entity category as well.
    Kamon.metrics().removeEntity(&quot;my-managed-actor&quot;, &quot;akka-actor&quot;);
</code></pre></div></div></div>


            </div>
          </div>
          <!--<div class="row align-items-center kamino-docs-bottom">
            <div class="col-xs-offset-1 col-xs-5">
                <a href="http://kamino.io">
                  <img class="img-fluid" alt="Sponsored by Kamino" src="/assets/img/sponsored-by-kamino.svg">
                </a>
                <a class="btn btn-sign-up btn-lg">Visit kamino.io</a>
            </div>
          </div>-->
        </div>

        <div class="col-12 col-md-3 pull-md-9 documentation-sidebar">
          <section>
  <ul class="tree">
    <li><a class="docs-level-three side" href="/documentation/get-started/"></i>Get Started</a></li>
    <li><a class="docs-level-three side" href="/documentation/events-and-workshops/"></i>Upcoming Events</a></li>
  </ul>
</section>
          


<section>
  <div class="tree tree-toggler docs-level-one row justify-content-between align-items-center">
    <span>
      kamon-core
    </span>

    <div class="dropdown version-dropdown">
      <a class="btn btn-secondary dropdown-toggle" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        0.6.6
      </a>

      <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
        
          <a class="dropdown-item" href="/documentation/kamon-core/0.6.6/overview/">0.6.6</a>
        
      </div>
    </div>
  </div>

  <ul>
    
      <li><a class="docs-level-three" href="/documentation/kamon-core/0.6.6/overview/">Get Started</a></li>
    
      <li><a class="docs-level-three" href="/documentation/kamon-core/0.6.6/configuration/">Configuring Kamon</a></li>
    

    
      <li>
      <label class="tree-toggler tree docs-level-two">Tracing</label>
      <ul class="tree tree-toggler">
        
        
          <li><a class="docs-level-three" href="/documentation/kamon-core/0.6.6/tracing/core-concepts/">Core Concepts</a></li>
        
          <li><a class="docs-level-three" href="/documentation/kamon-core/0.6.6/tracing/subscription-protocol/">Subscription Protocol</a></li>
        
          <li><a class="docs-level-three" href="/documentation/kamon-core/0.6.6/tracing/threading-model-considerations/">Threading Model Considerations</a></li>
        
          <li><a class="docs-level-three" href="/documentation/kamon-core/0.6.6/tracing/trace-context-manipulation/">Trace Context Manipulation</a></li>
        
          <li><a class="docs-level-three" href="/documentation/kamon-core/0.6.6/tracing/trace-metrics/">Trace Metrics</a></li>
        
      </ul>
      </li>
    
      <li>
      <label class="tree-toggler tree docs-level-two">Metrics</label>
      <ul class="tree tree-toggler">
        
        
          <li><a class="docs-level-three" href="/documentation/kamon-core/0.6.6/metrics/core-concepts/">Core Concepts</a></li>
        
          <li><a class="docs-level-three" href="/documentation/kamon-core/0.6.6/metrics/instruments/">Instruments</a></li>
        
          <li><a class="docs-level-three" href="/documentation/kamon-core/0.6.6/metrics/recording-metrics/">Recording Metrics</a></li>
        
          <li><a class="docs-level-three" href="/documentation/kamon-core/0.6.6/metrics/subscription-protocol/">Subscription Protocol</a></li>
        
      </ul>
      </li>
    
      <li>
      <label class="tree-toggler tree docs-level-two">Modules</label>
      <ul class="tree tree-toggler">
        
        
          <li><a class="docs-level-three" href="/documentation/kamon-core/0.6.6/modules/using-modules/">Using Modules</a></li>
        
      </ul>
      </li>
    
</section>
          <section>
  <div class="tree tree-toggler docs-level-one row align-items-center">
    <span>All Modules</span>
  </div>
  <ul class="tree tree-toggler">
    <li>
      <label class="tree-toggler tree docs-level-two">Foundations</label>
      <ul>
        <li><a class="docs-level-three" href="/documentation/kamon-core/0.6.6/overview/">Metrics and Tracing</a></li>
      </ul>
    </li>

    <li>
      <label class="tree-toggler tree docs-level-two">Metrics Collection</label>
      <ul>
        <li><a class="docs-level-three" href="/documentation/kamon-akka/0.6.6/overview/">Akka</a></li>
        <li><a class="docs-level-three" href="/documentation/kamon-scala/0.6.6/overview/">Scala Futures</a></li>
        <li><a class="docs-level-three" href="/documentation/kamon-play/0.6.6/overview/">Play Framework</a></li>
        <li><a class="docs-level-three" href="/documentation/kamon-spray/0.6.6/overview/">Spray</a></li>
        <li><a class="docs-level-three" href="/documentation/kamon-jdbc/0.6.6/overview/">JDBC</a></li>
        <li><a class="docs-level-three" href="/documentation/kamon-annotation/0.6.6/overview/">Annotations</a></li>
        <li><a class="docs-level-three" href="/documentation/kamon-system-metrics/0.6.6/overview/">System Metrics</a></li>
      </ul>
    </li>

    <li>
      <label class="tree-toggler tree docs-level-two">Reporter Backends</label>
      <ul>
        <!--<li><a class="docs-level-three" href="/documentation/kamon-kamino/0.6.6/overview/">Kamino</a></li>-->
        <li><a class="docs-level-three" href="/documentation/kamon-statsd/0.6.6/overview/">StatsD</a></li>
        <li><a class="docs-level-three" href="/documentation/kamon-datadog/0.6.6/overview/">Datadog</a></li>
        <li><a class="docs-level-three" href="/documentation/kamon-newrelic/0.6.6/overview/">New Relic</a></li>
        <li><a class="docs-level-three" href="/documentation/kamon-sematext-spm/0.6.6/overview/">Sematext SPM</a></li>
        <li><a class="docs-level-three" href="/documentation/kamon-jmx/0.6.6/overview/">JMX</a></li>
        <li><a class="docs-level-three" href="/documentation/kamon-fluentd/0.6.6/overview/">FluentD</a></li>
        <li><a class="docs-level-three" href="/documentation/kamon-influxdb/0.6.6/overview/">InfluxDB</a></li>
        <!--<li><a class="docs-level-three" href="/documentation/kamon-graphite/1.0.4/overview/">Graphite</a></li>-->
        <li><a class="docs-level-three" href="/documentation/kamon-riemann/0.6.6/overview/">Riemann</a></li>
        <li><a class="docs-level-three" href="/documentation/kamon-khronus/0.6.6/overview/">Khronus</a></li>

      </ul>
    </li>    
  </ul>
</section>
        </div>

      </div>
    </div>

    <div class="hero jumbotron-bottom">
  <div class="container">
    <div class="row middle-xs">
      <div class="col-xs-12">
        
      </div>
    </div>
  </div>
</div>


<!--<footer class="footer">
  <div class="container">
    <div class="row">
      <div class="col-sm-8 col-sm-offset-2">
        <p class="text-center upper">
          Get in touch
        </p>
        <p class="text-center">
          <a href="https://twitter.com/kamonteam" class="social-icon"><i class="fa fa-twitter"></i></a>
          <a href="https://github.com/kamon-io/Kamon" class="social-icon"><i class="fa fa-2x fa-github"></i></a>
          <a href="/teamblog/rss/" class="social-icon"><i class="fa fa-rss"></i></a>
          <a href="https://groups.google.com/forum/#!forum/kamon-user" class="social-icon"><i class="fa fa-envelope"></i></a>
        </p>
        <p class="text-center">
          <a href="/introduction/project-info/support/" class="btn btn-support upper">Support <i class="fa fa-wrench"></i></a>
        </p>
        <p class="text-center">
          <img src="/assets/img/kamon-footer-logo.png" alt="logo" />
        </p>
        <p class="copyright">
          &copy; 2015 Kamon. All rights reserved.
        </p>
      </div>
    </div>
  </div>
</footer>-->



    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="/assets/js/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="/assets/js/tether.min.js"></script>
    <script src="/assets/js/bootstrap.min.js"></script>
    <script src="/assets/js/prism.js"></script>
    <script src="/assets/js/prism-typesafeconfig.js"></script>
    <script>

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-45369085-1', 'kamon.io');
    ga('send', 'pageview');

</script>

  </body>
</html>
