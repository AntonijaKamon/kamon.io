<html lang="en">
  <head>
    <title>Kamon | System Metrics | Documentation</title>

<meta charset="utf-8">
<meta name="viewport"    content="width=device-width, initial-scale=1.0">
<meta name="description" content="Kamon is a set of tools that will help you monitor your reactive applications">

<!--<link rel="stylesheet" href="/assets/css/syntax-highlight.css">-->
<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,700' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="/assets/css/prism.css">
<link rel="stylesheet" href="/assets/css/styles.css">
<link rel="stylesheet" href="/assets/css/kamon.css">


<link rel="shortcut icon" href="/assets/img/favicon.ico" type="image/x-icon">
<link rel="icon" href="/assets/img/favicon.ico" type="image/x-icon">
<link href="https://plus.google.com/107736741680270898032?rel=author">
<link rel="alternate" type="application/rss+xml" title="Kamon Teamblog Feed" href="/teamblog/rss/">

<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

  </head>
  <body>
    <nav class="navbar navbar-default kamon-navbar">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-12 col-md-3">
          <a href="/documentation/get-started/">
            <img class="kamon-logo-image" alt="Kamon" src="/assets/img/kamon-logo-latest.svg">
          </a>
      </div>

      <div class="col-12 col-md-9">
        <div class="row justify-content-end align-items-center navigation-links">
            <div class="wip-warning col-12 col-md-4">
              WARNING: We are updating and fixing all docs around!
            </div>
            <a class="col-12 col-md-4 col-lg-3" href="/documentation/get-started/">
              <span class="nav-link">DOCUMENTATION</span>
            </a>
            <a class="col-12 col-md-2" href="/teamblog/">
              <span class="nav-link">BLOG</span>
            </a>
            
            <div class="col-12 col-md-2 hidden-sm-down">
              <div class="row justify-content-around align-items-center">
                <a href="https://twitter.com/kamonteam">
                  <i class="fa fa-twitter fa-lg nav-icon" aria-hidden="true"></i>
                </a>
                <a href="https://github.com/kamon-io/Kamon">
                  <i class="fa fa-github fa-lg nav-icon" aria-hidden="true"></i>
                </a>
                <a href="http://kamon.io/teamblog/rss/">
                  <i class="fa fa-rss fa-lg nav-icon" aria-hidden="true"></i>
                </a>
                <a href="https://groups.google.com/forum/#!forum/kamon-user">
                  <i class="fa fa-envelope fa-lg nav-icon" aria-hidden="true"></i>
                </a>
              </div>
            </div>
        </div>
      </div>
    </div>
  </div>
</nav>
      <div class="hero jumbotron-top">
    <div class="container">
      <div class="row">
        <div class="col-xs-12 col-md-7">
          <span class="jumbo-title">Documentation</span>
        </div>
      </div>
    </div>
  </div>  

    <div class="container">
      <div class="row">
        <div class="col-12 col-md-9 push-md-3">
          <div class="row align-items-center justify-content-end kamino-docs-top">
            <div>
                <a href="https://kamino.io">
                  <img class="img-fluid" alt="Sponsored by Kamino" src="/assets/img/sponsored-by-kamino.svg">
                </a>
            </div>
          </div>
          <div class="row docs-content">
            <div class="col-12">
              <h1 id="system-metrics">System Metrics</h1>

<p>Our <code>kamon-system-metrics</code> module registers a number of entities with the metrics module that track the performance
indicators of both the host machine and the JVM where your application is running.</p>

<p>This module doesn’t have any bytecode instrumentation requirement, and its only requirement to work properly is that
the appropriate <a href="https://github.com/hyperic/sigar">Sigar</a> native library is correctly loaded. To do so, the <code>kamon-system-metrics</code> module makes use of the
<a href="https://github.com/kamon-io/sigar-loader">sigar-loader</a> library. If your application uses Sigar for other purposes, it is advisable that you take a look at
<a href="https://github.com/kamon-io/sigar-loader">sigar-loader</a> to simplify the sigar native library provisioning process.</p>

<p>As you might expect, you and any other module can subscribe to all the metrics that are reported by this module using
the <code>system-metric</code> category and the entity recorder names described bellow.</p>

<p>By default the <code>kamon-system-metrics</code> module starts with Host and JVM metrics enabled, in the case that you want to <strong>enable/disable</strong> one of them, you can configure it this way:</p>

<pre class="line-numbers language-typesafeconfig"><code class="language-typesafeconfig">kamon {
  system-metrics {
   #sigar is enabled by default
   sigar-enabled = true

   #jmx related metrics are enabled by default
   jmx-enabled = true
  }
}</code></pre>

<h2 id="host-system-metrics">Host System Metrics</h2>

<p>We are using <a href="https://github.com/hyperic/sigar">Sigar</a> to gather all the host system metrics information and this requires us to have a few special
considerations given that <a href="https://github.com/hyperic/sigar">Sigar</a> instances are not thread-safe and some metrics (like cpu usage metrics) do not work
correctly when updated in intervals of less than a second. In the sections below, you will see histograms tracking
metrics that typically should be recorded with a gauge, but that we couldn’t allow because of the need to have a tight
control on timings and thread-safety.</p>

<p class="alert alert-warning">
In the case that <b>Sigar</b> can't obtain some metric in the host, we will log a warning indicating the error and the metric name.
</p>

<h3 id="cpu">cpu</h3>
<ul>
  <li><strong>user</strong>: a histogram tracking total percentage of system cpu user time.</li>
  <li><strong>system</strong>: a histogram tracking total percentage of system cpu kernel time.</li>
  <li><strong>wait</strong>: a histogram tracking total percentage of system cpu io wait time.</li>
  <li><strong>idle</strong>: a histogram tracking total percentage of system cpu idle time</li>
  <li><strong>stolen</strong>: a histogram tracking total percentage of system cpu involuntary wait time.</li>
</ul>

<h3 id="file-system">file-system</h3>
<ul>
  <li><strong>readBytes</strong>: a histogram tracking total number of physical disk reads in bytes.</li>
  <li><strong>writesBytes</strong>: a histogram tracking total number of physical disk writes in bytes.</li>
</ul>

<h3 id="load-average">load-average</h3>
<ul>
  <li><strong>one-minute</strong>: a histogram tracking the system load average for the last minute.</li>
  <li><strong>five-minutes</strong>: a histogram tracking the system load average for the five minutes.</li>
  <li><strong>fifteen-minutes</strong>: a histogram tracking the system load average for the fifteen minutes.</li>
</ul>

<h3 id="memory">memory</h3>
<ul>
  <li><strong>memory-used</strong>: a histogram tracking total used system memory in bytes.</li>
  <li><strong>memory-cache-and-buffer</strong>: a histogram tracking total memory used in cache and buffers memory in bytes.</li>
  <li><strong>memory-free</strong>: a histogram tracking total free system memory in bytes.</li>
  <li><strong>memory-total</strong>: a histogram tracking total system memory capacity in bytes.</li>
  <li><strong>swap-used</strong>: a histogram tracking total used system swap in bytes.</li>
  <li><strong>swap-free</strong>: a histogram tracking total used system swap in bytes.</li>
</ul>

<h3 id="network">network</h3>

<p>All network metrics represent the aggregate of all interfaces available in the host.</p>

<ul>
  <li><strong>rx-bytes</strong>: a histogram tracking total number of received packets in bytes.</li>
  <li><strong>tx-bytes</strong>: a histogram tracking total number of transmitted packets in bytes.</li>
  <li><strong>rx-errors</strong>: a histogram tracking total number of packets received with errors. This includes too-long-frames errors, ring-buffer overflow errors, etc.</li>
  <li><strong>tx-errors</strong>: a histogram tracking total number of errors encountered while transmitting packets. This list includes errors due to the transmission being aborted, errors due to the carrier, etc.</li>
  <li><strong>rx-dropped</strong>: a histogram tracking total number of incoming packets dropped.</li>
  <li><strong>tx-dropped</strong>: a histogram tracking total number of outgoing packets dropped.</li>
</ul>

<h3 id="process-cpu">process-cpu</h3>
<ul>
  <li><strong>process-user-cpu</strong>: a histogram tracking the total percentage of CPU spent by the application process in user space, relative to the overall CPU usage.</li>
  <li><strong>process-system-cpu</strong>: a histogram tracking the total percentage of CPU spent by the application process in system space, relative to the overall CPU usage.</li>
  <li><strong>process-cpu</strong>: a histogram tracking the total percentage of CPU spent by the application, relative to the overall CPU usage.</li>
</ul>

<h3 id="context-switches">context-switches</h3>

<p>The context switches metrics are special in the sense that they are not read using the <a href="https://github.com/hyperic/sigar">Sigar</a> library but rather reading
the information available in the <code>/proc/$pid/status</code> file for Linux systems.</p>

<ul>
  <li><strong>context-switches-process-voluntary</strong>: Total number of voluntary context switches related to the current process (one
thread explicitly yield the CPU to another).</li>
  <li><strong>context-switches-process-non-voluntary</strong>: Total number of involuntary context switches related to the current process
(the system scheduler suspends an active thread, and switches control to a different thread).</li>
  <li><strong>context-switches-global</strong>:  Total number of context switches across all CPUs.</li>
</ul>

<h2 id="jvm-metrics">JVM Metrics</h2>

<p>All JVM-specific metrics are gathered using JMX and all of them are using gauges to record the data. The reported JVM
metrics include:</p>

<h3 id="-garbage-collector">*-garbage-collector</h3>

<p>Depending on your specific instance configuration, the available garbage collectors will differ, but the same set of
metrics are recorded regardless of the collector in place.</p>

<ul>
  <li><strong>garbage-collection-count</strong>: a gauge tracking the number of garbage collections that have ocurred.</li>
  <li><strong>garbage-collection-time</strong>: a gauge tracking the time spent in garbage collections, measured in milliseconds.</li>
</ul>

<h3 id="class-loading">class-loading</h3>
<ul>
  <li><strong>classes-loaded</strong>: a gauge tracking the number of classes ever loaded by the application.</li>
  <li><strong>classes-unloaded</strong>: a gauge tracking the number of classes ever unloaded by the application.</li>
  <li><strong>classes-currently-loaded</strong>: a gauge tracking the number of classes currently loaded by the application.</li>
</ul>

<h3 id="heap-memory">heap-memory</h3>
<ul>
  <li><strong>heap-used</strong>: a gauge tracking the amount of heap memory currently being used in bytes.</li>
  <li><strong>heap-max</strong>: a gauge tracking the maximum amount of heap memory that can be used in bytes.</li>
  <li><strong>heap-committed</strong>: a gauge tracking the amount of memory that is committed for the JVM to use in bytes.</li>
</ul>

<h3 id="non-heap-memory">non-heap-memory</h3>
<ul>
  <li><strong>non-heap-used</strong>: a gauge tracking the amount of non-heap memory currently being used in bytes.</li>
  <li><strong>non-heap-max</strong>: a gauge tracking the maximum amount of non-heap memory that can be used in bytes.</li>
  <li><strong>non-heap-committed</strong>: a gauge tracking the amount of non-heap memory that is committed for the JVM to use in bytes.</li>
</ul>

<h3 id="threads">threads</h3>
<ul>
  <li><strong>daemon-thread-count</strong>: a gauge tracking the total number of daemon threads running in the JVM.</li>
  <li><strong>peak-thread-count</strong>: a gauge tracking the peak number of threads running in the JVM since it started.</li>
  <li><strong>thread-count</strong>: a gauge tracking the total number of live threads in the JVM, including both daemon and non-daemon threads.</li>
</ul>


            </div>
          </div>
          <!--<div class="row align-items-center kamino-docs-bottom">
            <div class="col-xs-offset-1 col-xs-5">
                <a href="http://kamino.io">
                  <img class="img-fluid" alt="Sponsored by Kamino" src="/assets/img/sponsored-by-kamino.svg">
                </a>
                <a class="btn btn-sign-up btn-lg">Visit kamino.io</a>
            </div>
          </div>-->
        </div>

        <div class="col-12 col-md-3 pull-md-9 documentation-sidebar">
          <section>
  <ul class="tree">
    <li><a class="docs-level-three side" href="/documentation/get-started/"></i>Get Started</a></li>
    <li><a class="docs-level-three side" href="/documentation/events-and-workshops/"></i>Upcoming Events</a></li>
  </ul>
</section>
          


<section>
  <div class="tree tree-toggler docs-level-one row justify-content-between align-items-center">
    <span>
      kamon-system-metrics
    </span>

    <div class="dropdown version-dropdown">
      <a class="btn btn-secondary dropdown-toggle" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        0.6.6
      </a>

      <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
        
          <a class="dropdown-item" href="/documentation/kamon-system-metrics/0.6.6/overview/">0.6.6</a>
        
      </div>
    </div>
  </div>

  <ul>
    
      <li><a class="docs-level-three" href="/documentation/kamon-system-metrics/0.6.6/overview/">Collecting System Metrics</a></li>
    

    
</section>
          <section>
  <div class="tree tree-toggler docs-level-one row align-items-center">
    <span>All Modules</span>
  </div>
  <ul class="tree tree-toggler">
    <li>
      <label class="tree-toggler tree docs-level-two">Foundations</label>
      <ul>
        <li><a class="docs-level-three" href="/documentation/kamon-core/0.6.6/overview/">Metrics and Tracing</a></li>
      </ul>
    </li>

    <li>
      <label class="tree-toggler tree docs-level-two">Metrics Collection</label>
      <ul>
        <li><a class="docs-level-three" href="/documentation/kamon-akka/0.6.6/overview/">Akka</a></li>
        <li><a class="docs-level-three" href="/documentation/kamon-scala/0.6.6/overview/">Scala Futures</a></li>
        <li><a class="docs-level-three" href="/documentation/kamon-play/0.6.6/overview/">Play Framework</a></li>
        <li><a class="docs-level-three" href="/documentation/kamon-spray/0.6.6/overview/">Spray</a></li>
        <li><a class="docs-level-three" href="/documentation/kamon-jdbc/0.6.6/overview/">JDBC</a></li>
        <li><a class="docs-level-three" href="/documentation/kamon-annotation/0.6.6/overview/">Annotations</a></li>
        <li><a class="docs-level-three" href="/documentation/kamon-system-metrics/0.6.6/overview/">System Metrics</a></li>
      </ul>
    </li>

    <li>
      <label class="tree-toggler tree docs-level-two">Reporter Backends</label>
      <ul>
        <!--<li><a class="docs-level-three" href="/documentation/kamon-kamino/0.6.6/overview/">Kamino</a></li>-->
        <li><a class="docs-level-three" href="/documentation/kamon-statsd/0.6.6/overview/">StatsD</a></li>
        <li><a class="docs-level-three" href="/documentation/kamon-datadog/0.6.6/overview/">Datadog</a></li>
        <li><a class="docs-level-three" href="/documentation/kamon-newrelic/0.6.6/overview/">New Relic</a></li>
        <li><a class="docs-level-three" href="/documentation/kamon-sematext-spm/0.6.6/overview/">Sematext SPM</a></li>
        <li><a class="docs-level-three" href="/documentation/kamon-jmx/0.6.6/overview/">JMX</a></li>
        <li><a class="docs-level-three" href="/documentation/kamon-fluentd/0.6.6/overview/">FluentD</a></li>
        <li><a class="docs-level-three" href="/documentation/kamon-influxdb/0.6.6/overview/">InfluxDB</a></li>
        <!--<li><a class="docs-level-three" href="/documentation/kamon-graphite/1.0.4/overview/">Graphite</a></li>-->
        <li><a class="docs-level-three" href="/documentation/kamon-riemann/0.6.6/overview/">Riemann</a></li>
        <li><a class="docs-level-three" href="/documentation/kamon-khronus/0.6.6/overview/">Khronus</a></li>

      </ul>
    </li>    
  </ul>
</section>
        </div>

      </div>
    </div>

    <div class="hero jumbotron-bottom">
  <div class="container">
    <div class="row middle-xs">
      <div class="col-xs-12">
        
      </div>
    </div>
  </div>
</div>


<!--<footer class="footer">
  <div class="container">
    <div class="row">
      <div class="col-sm-8 col-sm-offset-2">
        <p class="text-center upper">
          Get in touch
        </p>
        <p class="text-center">
          <a href="https://twitter.com/kamonteam" class="social-icon"><i class="fa fa-twitter"></i></a>
          <a href="https://github.com/kamon-io/Kamon" class="social-icon"><i class="fa fa-2x fa-github"></i></a>
          <a href="/teamblog/rss/" class="social-icon"><i class="fa fa-rss"></i></a>
          <a href="https://groups.google.com/forum/#!forum/kamon-user" class="social-icon"><i class="fa fa-envelope"></i></a>
        </p>
        <p class="text-center">
          <a href="/introduction/project-info/support/" class="btn btn-support upper">Support <i class="fa fa-wrench"></i></a>
        </p>
        <p class="text-center">
          <img src="/assets/img/kamon-footer-logo.png" alt="logo" />
        </p>
        <p class="copyright">
          &copy; 2015 Kamon. All rights reserved.
        </p>
      </div>
    </div>
  </div>
</footer>-->



    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="/assets/js/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="/assets/js/tether.min.js"></script>
    <script src="/assets/js/bootstrap.min.js"></script>
    <script src="/assets/js/prism.js"></script>
    <script src="/assets/js/prism-typesafeconfig.js"></script>
    <script>

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-45369085-1', 'kamon.io');
    ga('send', 'pageview');

</script>

  </body>
</html>
